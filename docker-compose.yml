services:
  # Default: one-command demo (docker compose up --build)
  demo:
    build: .
    entrypoint: ["bash", "/app/scripts/demo.sh"]
    ports:
      - "8080:8080"
      - "8081:8081"
      - "9090:9090/udp"
    stdin_open: true
    tty: true

  # Server-only (docker compose --profile server up --build server)
  server:
    build: .
    ports:
      - "8080:8080"
      - "8081:8081"
      - "9090:9090/udp"
    restart: unless-stopped
    profiles:
      - server
